The files here in this repository are supplemental material for the paper submitted to Applied Energy entitled "Integrated Pumped Hydro Reverse Osmosis System Optimization Featuring Surrogate Model Development in Reverse Osmosis Modeling". There are 3 groups of files:

1) New files incorporating paper revisions:

    Haefner_IPHROS_MOGA_NEW.m - MATLAB file that runs the optimization of the latest IPHRO system using a multiobjective genetic algorithm. This file requires ro_weights.m to run
    
    Haefner_IPHROS_Analysis_NEW.m - MATLAB file used to generate figures for processing optimization results. This file requires ro_weights.m and Opt_Results_eta_RO_obj_NEW.xlsx to run
    
    Figure_10_generator_NEW.m - MATLAB file that generates Figure 10 in the revised paper. This file requires Error_Qp_NN_WAVE_NEW.xlsx to run
    
    ro_weights.m - Matlab file that contains the neural network weights generated by AutoKeras
    
    Haefner_NN_for_Qp.py - Python file that generates the values for ro_weights.m by using AutoKeras. This file requires Haefner_WAVE_Simulations_trimmed.xlsx to run
    
    Opt_Results_eta_RO_obj_NEW.xlsx - Excel file storing the MOGA optimization results from Haefner_IPHROS_MOGA_NEW.m
    
    Error_Qp_NN_WAVE_NEW.xlsx - Excel file used to calculate the error between the predicted values of the permeate flowrate for an RO element and the actual values for a random 20% test set of Haefner_WAVE_Simulations_trimmed.xlsx
    
    Economic_Analysis_NEW.xlsx - Excel file used for the economic analysis found in Section 5.2 of the revised paper
    
    
2) Files used in both the first draft of the paper and the revised paper:

    Haefner_WAVE_Simulations.xlsx - data from WAVE simulations
    
    Haefner_WAVE_Simulations_trimmed.xlsx - a reduced version of HAEFNER_WAVE_simulations.xlsx that does not include any WAVE simulations that generate an "RO Design Warning" or have a permeate flowrate of zero due to rounding in WAVE 
    
    Haefner_R_Eqn_Analysis_JMP.jmp - JMP project that includes the analysis used to determine that the fractional salt rejection rate is a function of the permeate flowrate
    
    Haefner_R_Eqn_Formulation.m - MATLAB file that compares different models for fitting an equation for the fractional salt rejection rate and generates Equation 40 in the revised paper
    
    
3) Files only for pre-revision analysis (outdated)

    Haefner_IPHROS_MOGA.m - MATLAB file that runs the optimization of the IPHRO system using a multiobjective genetic algorithm

    Haefner_Aw_Eqn_Analysis.jmp - JMP project that includes the analysis used in developing Equation 41 for the membrane water permeability coefficient

    Opt Results.xlsx - Excel file with optimization results. This file is used in analyzing_converged_results_V2.m. This is a temporary file. Once made official, it will be renamed Haefner_...

    analyzing_converged_results_v2.m - MATLAB file used to generate figures for processing optimization results. This file uses Opt Results.xlsx. This is a temporary file. Once made official, it will be renamed Haefner_...

    making_residual_plots.m - temporary file
